import{_ as C,c as a,o as i,b as e,F as T,d as y,t as d,n as M,f as S,g as m,v as g,l as w,m as r,r as h,a as k,i as v,j as _}from"./index-BDR-ZV5H.js";const A={props:{testCases:Array}},$={class:"d-flex justify-content-between align-items-center mb-3"},x={class:"table table-striped"},E=["onClick"],V=["onClick"],U=["onClick"],N=["onClick"];function D(s,t,c,f,o,l){return i(),a("div",null,[e("div",$,[t[1]||(t[1]=e("h3",null,"Test Cases",-1)),e("button",{onClick:t[0]||(t[0]=n=>s.$emit("openModal")),class:"btn btn-primary"},"+ Add Test Case")]),e("table",x,[t[2]||(t[2]=e("thead",{class:"table-dark"},[e("tr",null,[e("th",null,"Title"),e("th",null,"Functionality"),e("th",null,"Expected Result"),e("th",null,"Created By"),e("th",null,"Status"),e("th",null,"Actions")])],-1)),e("tbody",null,[(i(!0),a(T,null,y(c.testCases,n=>{var u,b;return i(),a("tr",{key:n.id},[e("td",null,d(n.title),1),e("td",null,d(((u=n.functionality)==null?void 0:u.name)||"N/A"),1),e("td",null,d(n.expected_result),1),e("td",null,d(((b=n.created_by)==null?void 0:b.name)||"N/A"),1),e("td",null,[e("button",{class:M(["btn",n.assigned_user?"btn-success":"btn-secondary"]),onClick:p=>s.$emit("assign",n)},d(n.assigned_user?"Assigned":"Not Assigned"),11,E)]),e("td",null,[e("button",{onClick:p=>s.$emit("edit",n),class:"btn btn-warning btn-sm"},"Edit",8,V),e("button",{onClick:p=>s.$emit("delete",n.id),class:"btn btn-danger btn-sm"},"Delete",8,U),e("button",{onClick:p=>s.$emit("viewSteps",n),class:"btn btn-info btn-sm"},"View Steps",8,N)])])}),128))])])])}const F=C(A,[["render",D]]),O={props:{testCase:Object,functionalities:{type:Array,default:()=>[]}},data(){return{localTestCase:{}}},watch:{testCase:{immediate:!0,handler(s){this.localTestCase=s?{...s}:{title:"",functionality:"",description:"",expected_result:""}}}},methods:{save(){this.$emit("save",this.localTestCase)}}},j={class:"modal-content"},B={key:0},I={key:1},q={class:"form-group"},L={class:"form-group"},R=["value"],z={class:"form-group"},G={class:"form-group"},H={class:"form-buttons"};function J(s,t,c,f,o,l){return i(),a("div",{class:"modal-overlay",onClick:t[6]||(t[6]=S(n=>s.$emit("close"),["self"]))},[e("div",j,[o.localTestCase.id?(i(),a("h3",B,"Edit Test Case")):(i(),a("h3",I,"Add New Test Case")),e("form",{onSubmit:t[5]||(t[5]=S((...n)=>l.save&&l.save(...n),["prevent"]))},[e("div",q,[t[7]||(t[7]=e("label",{for:"title"},"Test Case Title",-1)),m(e("input",{type:"text",id:"title","onUpdate:modelValue":t[0]||(t[0]=n=>o.localTestCase.title=n),class:"form-control",required:""},null,512),[[g,o.localTestCase.title]])]),e("div",L,[t[9]||(t[9]=e("label",{for:"functionality"},"Functionality",-1)),m(e("select",{id:"functionality","onUpdate:modelValue":t[1]||(t[1]=n=>o.localTestCase.functionality=n),class:"form-control",required:""},[t[8]||(t[8]=e("option",{value:"",disabled:""},"Select Functionality",-1)),(i(!0),a(T,null,y(c.functionalities,n=>(i(),a("option",{key:n.id,value:n.id},d(n.name),9,R))),128))],512),[[w,o.localTestCase.functionality]])]),e("div",z,[t[10]||(t[10]=e("label",{for:"description"},"Description",-1)),m(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=n=>o.localTestCase.description=n),class:"form-control"},null,512),[[g,o.localTestCase.description]])]),e("div",G,[t[11]||(t[11]=e("label",{for:"expected_result"},"Expected Result",-1)),m(e("input",{type:"text",id:"expected_result","onUpdate:modelValue":t[3]||(t[3]=n=>o.localTestCase.expected_result=n),class:"form-control",required:""},null,512),[[g,o.localTestCase.expected_result]])]),e("div",H,[t[12]||(t[12]=e("button",{type:"submit",class:"btn btn-primary"},"Save",-1)),e("button",{type:"button",onClick:t[4]||(t[4]=n=>s.$emit("close")),class:"btn btn-secondary"},"Cancel")])],32)])])}const K=C(O,[["render",J],["__scopeId","data-v-aecec287"]]),P={props:{testCase:Object},data(){return{testers:[],selectedUser:null}},async mounted(){const s=await r.get("/users/?role=tester");this.testers=s.data},methods:{assign(){this.$emit("assign",{testCaseId:this.testCase.id,userId:this.selectedUser})}}},Q={class:"modal-overlay"},W={class:"modal-content"},X=["value"],Y={class:"form-buttons"};function Z(s,t,c,f,o,l){return i(),a("div",Q,[e("div",W,[t[5]||(t[5]=e("h3",null,"Assign Test Case",-1)),e("form",{onSubmit:t[2]||(t[2]=S((...n)=>l.assign&&l.assign(...n),["prevent"]))},[t[4]||(t[4]=e("label",null,"Select User",-1)),m(e("select",{"onUpdate:modelValue":t[0]||(t[0]=n=>o.selectedUser=n),class:"form-control"},[(i(!0),a(T,null,y(o.testers,n=>(i(),a("option",{key:n.id,value:n.id},d(n.name),9,X))),128))],512),[[w,o.selectedUser]]),e("div",Y,[t[3]||(t[3]=e("button",{type:"submit",class:"btn btn-primary"},"Assign",-1)),e("button",{type:"button",onClick:t[1]||(t[1]=n=>s.$emit("close")),class:"btn btn-secondary"},"Cancel")])],32)])])}const ee=C(P,[["render",Z]]),te={props:{testCase:Object},data(){return{testSteps:[]}},methods:{async fetchTestSteps(){try{const s=await r.get(`/testcases/${this.testCase.id}/steps/`);this.testSteps=s.data}catch(s){console.error("Error fetching test steps:",s)}},async addStep(){const s={test_case:this.testCase.id,step_description:"New Step",expected_outcome:"Expected Outcome"};await r.post("/teststeps/",s),this.fetchTestSteps()},async editStep(s){const t={...s,step_description:prompt("Edit Step",s.step_description)};await r.put(`/teststeps/${s.id}/`,t),this.fetchTestSteps()},async deleteStep(s){await r.delete(`/teststeps/${s}/`),this.fetchTestSteps()}},mounted(){this.fetchTestSteps()}},se={class:"modal-overlay"},ne={class:"modal-content"},oe={class:"table"},le=["onClick"],ie=["onClick"];function ae(s,t,c,f,o,l){return i(),a("div",se,[e("div",ne,[e("h3",null,'Test Steps for "'+d(c.testCase.title)+'"',1),e("table",oe,[t[2]||(t[2]=e("thead",null,[e("tr",null,[e("th",null,"Step"),e("th",null,"Expected Outcome"),e("th",null,"Actions")])],-1)),e("tbody",null,[(i(!0),a(T,null,y(o.testSteps,n=>(i(),a("tr",{key:n.id},[e("td",null,d(n.step_description),1),e("td",null,d(n.expected_outcome),1),e("td",null,[e("button",{onClick:u=>l.editStep(n),class:"btn btn-warning btn-sm"},"Edit",8,le),e("button",{onClick:u=>l.deleteStep(n.id),class:"btn btn-danger btn-sm"},"Delete",8,ie)])]))),128))])]),e("button",{onClick:t[0]||(t[0]=(...n)=>l.addStep&&l.addStep(...n)),class:"btn btn-primary"},"+ Add Step"),e("button",{onClick:t[1]||(t[1]=n=>s.$emit("close")),class:"btn btn-secondary"},"Close")])])}const re=C(te,[["render",ae]]),de={components:{TestCaseTable:F,TestCaseModal:K,TestCaseAssignmentModal:ee,TestStepsView:re},data(){return{testCases:[],functionalities:[],selectedTestCase:null,showModal:!1,showAssignModal:!1,showStepsModal:!1}},methods:{async fetchTestCases(){try{const s=await r.get("/testcases/");this.testCases=s.data}catch(s){console.error("Error fetching test cases:",s)}},async fetchFunctionalities(){try{const s=await r.get("/functionalities/");this.functionalities=s.data}catch(s){console.error("Error fetching functionalities:",s)}},openCreateModal(){this.selectedTestCase=null,this.showModal=!0},editTestCase(s){this.selectedTestCase={...s},this.showModal=!0},openAssignModal(s){this.selectedTestCase={...s},this.showAssignModal=!0},openTestSteps(s){this.selectedTestCase={...s},this.showStepsModal=!0},closeModal(){this.showModal=!1,this.fetchTestCases()},closeAssignModal(){this.showAssignModal=!1,this.fetchTestCases()},closeTestSteps(){this.showStepsModal=!1},async assignUser({testCaseId:s,userId:t}){try{await r.post(`/testcases/${s}/assign/`,{user_id:t}),this.closeAssignModal()}catch(c){console.error("Error assigning user:",c)}},async deleteTestCase(s){confirm("Are you sure you want to delete this test case?")&&(await r.delete(`/testcases/${s}/`),this.fetchTestCases())},async saveTestCase(s){s.id?await r.put(`/testcases/${s.id}/`,s):await r.post("/testcases/",s),this.closeModal()}},mounted(){this.fetchTestCases(),this.fetchFunctionalities()}},ce={class:"container mt-4"};function ue(s,t,c,f,o,l){const n=h("TestCaseTable"),u=h("TestCaseModal"),b=h("TestCaseAssignmentModal"),p=h("TestStepsView");return i(),a("div",ce,[t[0]||(t[0]=e("h2",{class:"mb-4"},"Test Case Management",-1)),k(n,{testCases:o.testCases,onOpenModal:l.openCreateModal,onEdit:l.editTestCase,onDelete:l.deleteTestCase,onAssign:l.openAssignModal,onViewSteps:l.openTestSteps},null,8,["testCases","onOpenModal","onEdit","onDelete","onAssign","onViewSteps"]),o.showModal?(i(),v(u,{key:0,testCase:o.selectedTestCase,functionalities:o.functionalities,onClose:l.closeModal,onSave:l.saveTestCase},null,8,["testCase","functionalities","onClose","onSave"])):_("",!0),o.showAssignModal?(i(),v(b,{key:1,testCase:o.selectedTestCase,onClose:l.closeAssignModal,onAssign:l.assignUser},null,8,["testCase","onClose","onAssign"])):_("",!0),o.showStepsModal?(i(),v(p,{key:2,testCase:o.selectedTestCase,onClose:l.closeTestSteps},null,8,["testCase","onClose"])):_("",!0)])}const me=C(de,[["render",ue]]);export{me as default};
