import{_ as m,c as l,o as a,b as t,F as h,d as p,t as d,n as E,f,g as y,v,r as x,a as g,i as k,j as C,m as _}from"./index-BDR-ZV5H.js";const T={props:{testExecutions:Array},methods:{statusClass(e){return{"badge bg-success":e==="Passed","badge bg-danger":e==="Failed","badge bg-warning":!e}}}},M={key:0,class:"no-tests"},$={key:1,class:"table custom-table shadow-sm"},w=["onClick"];function S(e,s,i,b,u,o){return a(),l("div",null,[i.testExecutions.length===0?(a(),l("div",M,s[0]||(s[0]=[t("p",null,"No test cases assigned to you yet. ",-1)]))):(a(),l("table",$,[s[1]||(s[1]=t("thead",null,[t("tr",null,[t("th",null,"Test Case"),t("th",null,"Functionality"),t("th",null,"Assigned By"),t("th",null,"Status"),t("th",null,"Actions")])],-1)),t("tbody",null,[(a(!0),l(h,null,p(i.testExecutions,n=>{var c,r;return a(),l("tr",{key:n.id},[t("td",null,d(n.test_case.title),1),t("td",null,d(((c=n.test_case.functionality)==null?void 0:c.name)||"N/A"),1),t("td",null,d(((r=n.assigned_by)==null?void 0:r.name)||"N/A"),1),t("td",null,[t("span",{class:E(o.statusClass(n.status))},d(n.status||"Pending"),3)]),t("td",null,[t("button",{class:"btn btn-primary btn-sm",onClick:G=>e.$emit("execute",n)}," 🚀 Execute ",8,w)])])}),128))])]))])}const F=m(T,[["render",S],["__scopeId","data-v-3aa11082"]]),A={props:{execution:Object},data(){return{localSteps:this.execution.test_case.steps.map(e=>({...e,status:"",comment:""}))}},methods:{markPass(e){this.localSteps[e].status="Passed"},markFail(e){this.localSteps[e].status="Failed"},submit(){this.$emit("save",{executionId:this.execution.id,steps:this.localSteps})}}},N={class:"modal-overlay"},P={class:"modal-content"},V={class:"step-actions"},B=["onClick"],I=["onClick"],j=["onUpdate:modelValue"],D={class:"form-buttons"};function U(e,s,i,b,u,o){return a(),l("div",N,[t("div",P,[t("h3",null,"Execute Test Case: "+d(i.execution.test_case.title),1),t("form",{onSubmit:s[1]||(s[1]=f((...n)=>o.submit&&o.submit(...n),["prevent"]))},[(a(!0),l(h,null,p(u.localSteps,(n,c)=>(a(),l("div",{class:"form-group",key:c},[t("label",null,d(n.description),1),t("div",V,[t("button",{type:"button",class:"btn btn-success btn-sm",onClick:r=>o.markPass(c)},"✅ Pass",8,B),t("button",{type:"button",class:"btn btn-danger btn-sm",onClick:r=>o.markFail(c)},"❌ Fail",8,I)]),y(t("textarea",{"onUpdate:modelValue":r=>n.comment=r,placeholder:"Add comments...",class:"form-control mt-2"},null,8,j),[[v,n.comment]])]))),128)),t("div",D,[s[2]||(s[2]=t("button",{type:"submit",class:"btn btn-primary"},"Submit",-1)),t("button",{type:"button",onClick:s[0]||(s[0]=n=>e.$emit("close")),class:"btn btn-secondary"},"Cancel")])],32)])])}const z=m(A,[["render",U],["__scopeId","data-v-9f222797"]]),L={components:{TestExecutionTable:F,TestExecutionModal:z},data(){return{testExecutions:[],selectedExecution:null,showModal:!1}},methods:{async fetchTestExecutions(){try{const e=await _.get("/testexecutions/");this.testExecutions=e.data}catch(e){console.error("Error fetching test executions:",e)}},openExecutionModal(e){this.selectedExecution={...e},this.showModal=!0},closeModal(){this.showModal=!1,this.fetchTestExecutions()},async submitExecution({executionId:e,steps:s}){try{await _.post(`/testexecutions/${e}/execute/`,{steps:s}),this.closeModal()}catch(i){console.error("Error submitting execution:",i)}}},mounted(){this.fetchTestExecutions()}},O={class:"container mt-4"};function q(e,s,i,b,u,o){const n=x("TestExecutionTable"),c=x("TestExecutionModal");return a(),l("div",O,[s[0]||(s[0]=t("h2",{class:"mb-4 text-center"},"🧪 Test Execution",-1)),g(n,{testExecutions:u.testExecutions,onExecute:o.openExecutionModal},null,8,["testExecutions","onExecute"]),u.showModal?(a(),k(c,{key:0,execution:u.selectedExecution,onClose:o.closeModal,onSave:o.submitExecution},null,8,["execution","onClose","onSave"])):C("",!0)])}const J=m(L,[["render",q]]);export{J as default};
