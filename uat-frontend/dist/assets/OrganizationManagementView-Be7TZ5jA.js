import{_ as g,c as u,o as c,b as t,F as y,d as z,t as d,e as m,w as C,f as O,g as f,v as h,h as k,a as $,i as w,j as M,k as _}from"./index-BDR-ZV5H.js";const D={class:"table-responsive"},x={class:"table table-striped"},E=["onClick"],N=["onClick"],S={__name:"OrganizationTable",props:{organizations:{type:Array,required:!0}},emits:["edit","delete"],setup(p){const r=o=>new Date(o).toLocaleDateString();return(o,s)=>(c(),u("div",D,[t("table",x,[s[0]||(s[0]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Name"),t("th",null,"Description"),t("th",null,"Created At"),t("th",null,"Actions")])],-1)),t("tbody",null,[(c(!0),u(y,null,z(p.organizations,a=>(c(),u("tr",{key:a.id},[t("td",null,d(a.id),1),t("td",null,d(a.name),1),t("td",null,d(a.description),1),t("td",null,d(r(a.created_at)),1),t("td",null,[t("button",{class:"btn btn-sm btn-primary me-2",onClick:i=>o.$emit("edit",a)}," Edit ",8,E),t("button",{class:"btn btn-sm btn-danger",onClick:i=>o.$emit("delete",a.id)}," Delete ",8,N)])]))),128))])])]))}},V=g(S,[["__scopeId","data-v-cbe001cd"]]),A={class:"modal fade show",tabindex:"-1","aria-hidden":"true",style:{display:"block"}},B={class:"modal-dialog"},I={class:"modal-content"},q={class:"modal-header"},T={class:"modal-title"},U={class:"modal-body"},j={class:"mb-3"},F={class:"mb-3"},L={class:"modal-footer"},G={type:"submit",class:"btn btn-primary"},H={__name:"OrganizationModal",props:{organization:{type:Object,default:()=>({})}},emits:["save","close"],setup(p,{emit:r}){const o=p,s=r,a=m({name:"",description:""}),i=m(!1);C(()=>o.organization,l=>{l&&l.id?(a.value={...l},i.value=!0):(a.value={name:"",description:""},i.value=!1)},{immediate:!0});const b=()=>{var l;s("save",{...a.value,id:(l=o.organization)==null?void 0:l.id})},v=()=>{s("close")};return(l,e)=>(c(),u("div",A,[t("div",B,[t("div",I,[t("form",{onSubmit:O(b,["prevent"])},[t("div",q,[t("h5",T,d(i.value?"Edit Organization":"Create Organization"),1),t("button",{type:"button",class:"btn-close",onClick:v,"aria-label":"Close"})]),t("div",U,[t("div",j,[e[2]||(e[2]=t("label",{class:"form-label"},"Name",-1)),f(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>a.value.name=n),type:"text",class:"form-control",required:""},null,512),[[h,a.value.name]])]),t("div",F,[e[3]||(e[3]=t("label",{class:"form-label"},"Description",-1)),f(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=n=>a.value.description=n),class:"form-control",rows:"3",required:""},null,512),[[h,a.value.description]])])]),t("div",L,[t("button",{type:"button",class:"btn btn-secondary",onClick:v}," Cancel "),t("button",G,d(i.value?"Update":"Create"),1)])],32)])])]))}},J=g(H,[["__scopeId","data-v-215758f3"]]),K={class:"container"},P={__name:"OrganizationManagementView",setup(p){const r=m([]),o=m(!1),s=m(null),a=async()=>{try{const e=await _.get("/organizations");r.value=e.data}catch(e){console.error("Error fetching organizations:",e)}},i=e=>{s.value=e,o.value=!0},b=()=>{o.value=!1,s.value=null},v=async e=>{try{e.id?await _.put(`/organizations/${e.id}/`,e):await _.post("/organizations/",e),a(),b()}catch(n){console.error("Error saving organization:",n)}},l=async e=>{if(confirm("Are you sure you want to delete this organization?"))try{await _.delete(`organizations/${e}/`),a()}catch(n){console.error("Error deleting organization:",n)}};return k(a),(e,n)=>(c(),u("div",K,[n[1]||(n[1]=t("h2",null,"Organization Management",-1)),t("button",{onClick:n[0]||(n[0]=Q=>i(null)),class:"btn btn-primary mb-3"}," + Create Organization "),$(V,{organizations:r.value,onEdit:i,onDelete:l},null,8,["organizations"]),o.value?(c(),w(J,{key:0,organization:s.value,onClose:b,onSave:v},null,8,["organization"])):M("",!0)]))}},W=g(P,[["__scopeId","data-v-1924592e"]]);export{W as default};
