import{_ as y,c as a,o as s,b as e,F as b,d as F,t as u,f as _,g as m,v as p,l as g,r as h,a as M,i as k,j as C,m as r}from"./index-C8O2CauJ.js";const $={props:{functionalities:Array}},w={class:"d-flex justify-content-between align-items-center mb-3"},E={class:"table table-striped"},S=["onClick"],A=["onClick"];function D(n,t,c,f,i,l){return s(),a("div",null,[e("div",w,[t[1]||(t[1]=e("h3",null,"Functionalities",-1)),e("button",{onClick:t[0]||(t[0]=o=>n.$emit("openModal")),class:"btn btn-primary"},"+ Add Functionality")]),e("table",E,[t[2]||(t[2]=e("thead",{class:"table-dark"},[e("tr",null,[e("th",null,"Name"),e("th",null,"System"),e("th",null,"Description"),e("th",null,"Actions")])],-1)),e("tbody",null,[(s(!0),a(b,null,F(c.functionalities,o=>{var d;return s(),a("tr",{key:o.id},[e("td",null,u(o.name),1),e("td",null,u(((d=o.system)==null?void 0:d.name)||"N/A"),1),e("td",null,u(o.description),1),e("td",null,[e("button",{onClick:v=>n.$emit("edit",o),class:"btn btn-warning btn-sm"},"Edit",8,S),e("button",{onClick:v=>n.$emit("delete",o.id),class:"btn btn-danger btn-sm"},"Delete",8,A)])])}),128))])])])}const N=y($,[["render",D]]),V={props:{functionality:Object,systems:Array},data(){return{localFunctionality:{...this.functionality}}},methods:{save(){this.$emit("save",this.localFunctionality)}}},x={class:"modal-overlay"},B={class:"modal-content"},O={key:0},T={key:1},U={class:"form-group"},j={class:"form-group"},q=["value"],I={class:"form-group"},L={class:"form-buttons"};function z(n,t,c,f,i,l){return s(),a("div",x,[e("div",B,[c.functionality.id?(s(),a("h3",O,"Edit Functionality")):(s(),a("h3",T,"Add New Functionality")),e("form",{onSubmit:t[4]||(t[4]=_((...o)=>l.save&&l.save(...o),["prevent"]))},[e("div",U,[t[5]||(t[5]=e("label",{for:"name"},"Functionality Name",-1)),m(e("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>i.localFunctionality.name=o),class:"form-control",required:""},null,512),[[p,i.localFunctionality.name]])]),e("div",j,[t[6]||(t[6]=e("label",{for:"system"},"System",-1)),m(e("select",{id:"system","onUpdate:modelValue":t[1]||(t[1]=o=>i.localFunctionality.system=o),class:"form-control",required:""},[(s(!0),a(b,null,F(c.systems,o=>(s(),a("option",{key:o.id,value:o.id},u(o.name),9,q))),128))],512),[[g,i.localFunctionality.system]])]),e("div",I,[t[7]||(t[7]=e("label",{for:"description"},"Description",-1)),m(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=o=>i.localFunctionality.description=o),class:"form-control"},null,512),[[p,i.localFunctionality.description]])]),e("div",L,[t[8]||(t[8]=e("button",{type:"submit",class:"btn btn-primary"},"Save",-1)),e("button",{type:"button",onClick:t[3]||(t[3]=o=>n.$emit("close")),class:"btn btn-secondary"},"Cancel")])],32)])])}const G=y(V,[["render",z],["__scopeId","data-v-1554f5ca"]]),H={components:{FunctionalityTable:N,FunctionalityModal:G},data(){return{functionalities:[],systems:[],showModal:!1,selectedFunctionality:null}},methods:{async fetchFunctionalities(){try{const n=await r.get("/functionalities/");this.functionalities=n.data}catch(n){console.error("Error fetching functionalities:",n)}},async fetchSystems(){try{const n=await r.get("/systems/");this.systems=n.data}catch(n){console.error("Error fetching systems:",n)}},openCreateModal(){console.log("Opening Create Functionality Modal ✅"),this.selectedFunctionality={id:null,name:"",system:null,description:""},this.showModal=!0,this.$forceUpdate()},editFunctionality(n){console.log("Editing Functionality ✅",n),this.selectedFunctionality={...n},this.showModal=!0},deleteFunctionality(n){confirm("Are you sure you want to delete this functionality?")&&r.delete(`/functionalities/${n}/`).then(()=>{this.functionalities=this.functionalities.filter(t=>t.id!==n)}).catch(t=>console.error("Error deleting functionality:",t))},saveFunctionality(n){n.id?r.put(`/functionalities/${n.id}/`,n).then(()=>this.fetchFunctionalities()).catch(t=>console.error("Error updating functionality:",t)):r.post("/functionalities/",n).then(()=>this.fetchFunctionalities()).catch(t=>console.error("Error creating functionality:",t)),this.closeModal()},closeModal(){console.log("Closing Modal ✅"),this.selectedFunctionality=null,this.showModal=!1}},mounted(){this.fetchFunctionalities(),this.fetchSystems()}},J={class:"container mt-4"};function K(n,t,c,f,i,l){const o=h("FunctionalityTable"),d=h("FunctionalityModal");return s(),a("div",J,[t[0]||(t[0]=e("h2",{class:"mb-4"},"Functionality Management",-1)),M(o,{functionalities:i.functionalities,onOpenModal:l.openCreateModal,onEdit:l.editFunctionality,onDelete:l.deleteFunctionality},null,8,["functionalities","onOpenModal","onEdit","onDelete"]),i.showModal?(s(),k(d,{key:0,functionality:i.selectedFunctionality,systems:i.systems,onClose:l.closeModal,onSave:l.saveFunctionality},null,8,["functionality","systems","onClose","onSave"])):C("",!0)])}const Q=y(H,[["render",K]]);export{Q as default};
