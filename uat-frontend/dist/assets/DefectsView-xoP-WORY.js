import{_ as v,c as d,o as i,b as t,j as g,F as k,d as V,t as a,n as f,g as p,v as y,l as C,p as F,q as u,r as D,a as S,i as w,m as B}from"./index-BDR-ZV5H.js";const M={props:{defects:Array},data(){return{sortKey:"",sortAsc:!0}},computed:{sortedDefects(){return[...this.defects].sort((n,e)=>{if(!this.sortKey)return 0;let o=n[this.sortKey]>e[this.sortKey]?1:-1;return this.sortAsc?o:-o})}},methods:{sortBy(n){this.sortAsc=this.sortKey===n?!this.sortAsc:!0,this.sortKey=n}}},x={class:"defect-table"},A=["onClick"],I={key:0};function N(n,e,o,c,r,l){return i(),d("div",null,[t("table",x,[t("thead",null,[t("tr",null,[t("th",{onClick:e[0]||(e[0]=s=>l.sortBy("name"))},"Defect Name"),t("th",{onClick:e[1]||(e[1]=s=>l.sortBy("test_case"))},"Test Case"),t("th",{onClick:e[2]||(e[2]=s=>l.sortBy("severity"))},"Severity"),t("th",{onClick:e[3]||(e[3]=s=>l.sortBy("status"))},"Status"),t("th",{onClick:e[4]||(e[4]=s=>l.sortBy("reported_at"))},"Date Reported"),e[5]||(e[5]=t("th",null,"Actions",-1))])]),t("tbody",null,[(i(!0),d(k,null,V(l.sortedDefects,s=>(i(),d("tr",{key:s.id},[t("td",null,a(s.name),1),t("td",null,a(s.test_case),1),t("td",null,[t("span",{class:f(`severity-${s.severity}`)},a(s.severity),3)]),t("td",null,[t("span",{class:f(`status-${s.status}`)},a(s.status),3)]),t("td",null,a(new Date(s.reported_at).toLocaleDateString()),1),t("td",null,[t("button",{class:"btn-view",onClick:m=>n.$emit("view-details",s)},"View",8,A)])]))),128)),l.sortedDefects.length?g("",!0):(i(),d("tr",I,e[6]||(e[6]=[t("td",{colspan:"6",class:"no-data"},"No defects reported.",-1)])))])])])}const T=v(M,[["render",N],["__scopeId","data-v-545abc12"]]),U={data(){return{searchQuery:"",selectedSeverity:"",selectedStatus:"",startDate:"",endDate:""}},methods:{applyFilters(){this.$emit("filter-updated",{searchQuery:this.searchQuery,selectedSeverity:this.selectedSeverity,selectedStatus:this.selectedStatus,startDate:this.startDate,endDate:this.endDate})},resetFilters(){this.searchQuery="",this.selectedSeverity="",this.selectedStatus="",this.startDate="",this.endDate="",this.applyFilters()}}},h={class:"filter-container"};function K(n,e,o,c,r,l){return i(),d("div",h,[p(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>r.searchQuery=s),type:"text",placeholder:"Search by defect name...",onInput:e[1]||(e[1]=(...s)=>l.applyFilters&&l.applyFilters(...s))},null,544),[[y,r.searchQuery]]),p(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>r.selectedSeverity=s),onChange:e[3]||(e[3]=(...s)=>l.applyFilters&&l.applyFilters(...s))},e[11]||(e[11]=[F('<option value="" data-v-f327368a>All Severities</option><option value="Critical" data-v-f327368a>Critical</option><option value="High" data-v-f327368a>High</option><option value="Medium" data-v-f327368a>Medium</option><option value="Low" data-v-f327368a>Low</option>',5)]),544),[[C,r.selectedSeverity]]),p(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>r.selectedStatus=s),onChange:e[5]||(e[5]=(...s)=>l.applyFilters&&l.applyFilters(...s))},e[12]||(e[12]=[F('<option value="" data-v-f327368a>All Status</option><option value="Open" data-v-f327368a>Open</option><option value="InProgress" data-v-f327368a>In Progress</option><option value="Resolved" data-v-f327368a>Resolved</option><option value="Closed" data-v-f327368a>Closed</option>',5)]),544),[[C,r.selectedStatus]]),p(t("input",{type:"date","onUpdate:modelValue":e[6]||(e[6]=s=>r.startDate=s),onChange:e[7]||(e[7]=(...s)=>l.applyFilters&&l.applyFilters(...s))},null,544),[[y,r.startDate]]),p(t("input",{type:"date","onUpdate:modelValue":e[8]||(e[8]=s=>r.endDate=s),onChange:e[9]||(e[9]=(...s)=>l.applyFilters&&l.applyFilters(...s))},null,544),[[y,r.endDate]]),t("button",{class:"btn-reset",onClick:e[10]||(e[10]=(...s)=>l.resetFilters&&l.resetFilters(...s))},"Reset")])}const Q=v(U,[["render",K],["__scopeId","data-v-f327368a"]]),R={props:{defect:Object}},L={class:"modal-overlay"},O={class:"modal-content"};function j(n,e,o,c,r,l){return i(),d("div",L,[t("div",O,[e[9]||(e[9]=t("h3",null,"Defect Details",-1)),t("p",null,[e[1]||(e[1]=t("strong",null,"Name:",-1)),u(" "+a(o.defect.name),1)]),t("p",null,[e[2]||(e[2]=t("strong",null,"Description:",-1)),u(" "+a(o.defect.description),1)]),t("p",null,[e[3]||(e[3]=t("strong",null,"Test Case:",-1)),u(" "+a(o.defect.test_case),1)]),t("p",null,[e[4]||(e[4]=t("strong",null,"Severity:",-1)),e[5]||(e[5]=u()),t("span",{class:f(`severity-${o.defect.severity}`)},a(o.defect.severity),3)]),t("p",null,[e[6]||(e[6]=t("strong",null,"Status:",-1)),e[7]||(e[7]=u()),t("span",{class:f(`status-${o.defect.status}`)},a(o.defect.status),3)]),t("p",null,[e[8]||(e[8]=t("strong",null,"Date Reported:",-1)),u(" "+a(new Date(o.defect.reported_at).toLocaleString()),1)]),t("button",{onClick:e[0]||(e[0]=s=>n.$emit("close")),class:"btn-close"},"Close")])])}const E=v(R,[["render",j],["__scopeId","data-v-a8eeaa7a"]]),H={components:{DefectTable:T,DefectFilter:Q,DefectDetailModal:E},data(){return{defects:[],filteredDefects:[],selectedDefect:null}},methods:{fetchDefects(){B.get("/defects").then(n=>{this.defects=n.data,this.filteredDefects=n.data}).catch(n=>console.error("Error fetching defects:",n))},applyFilters(n){this.filteredDefects=n},openDefectModal(n){this.selectedDefect=n}},created(){this.fetchDefects()}},P={class:"container"};function q(n,e,o,c,r,l){const s=D("DefectFilter"),m=D("DefectTable"),b=D("DefectDetailModal");return i(),d("div",P,[e[1]||(e[1]=t("h2",{class:"page-title"},"Reported Defects",-1)),S(s,{onFilterUpdated:l.applyFilters},null,8,["onFilterUpdated"]),S(m,{defects:r.filteredDefects,onViewDetails:l.openDefectModal},null,8,["defects","onViewDetails"]),r.selectedDefect?(i(),w(b,{key:0,defect:r.selectedDefect,onClose:e[0]||(e[0]=z=>r.selectedDefect=null)},null,8,["defect"])):g("",!0)])}const J=v(H,[["render",q],["__scopeId","data-v-402bcf8b"]]);export{J as default};
