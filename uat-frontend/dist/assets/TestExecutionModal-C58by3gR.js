import{_ as v,s as _,f as h,c as n,o as i,a as s,j as D,k as d,p as f,F as m,g as p,t as u,v as g}from"./index-DrsjAiDN.js";const l=_(),y={props:["execution"],data(){return{executionData:{status:"in_progress",notes:"",completed_at:new Date().toISOString(),test_case:this.execution.id,tester:this.execution.assigned_user||null,steps:this.execution.steps.map(o=>({id:o.id,step_number:o.step_number,description:o.description,status:""}))},statusChoices:[]}},async mounted(){try{const o=await h.get("/status-choices/");this.statusChoices=o.data}catch(o){console.error("Error fetching status choices:",o)}},methods:{async submit(){if(!this.executionData.tester){l.error("Tester ID not found. Please log in again.");return}if(this.executionData.steps.some(t=>!t.status)){l.warning("Please select a status for all steps.");return}try{const t={status:this.executionData.status,notes:this.executionData.notes,completed_at:this.executionData.completed_at,test_case:this.executionData.test_case,tester:this.executionData.tester,steps:this.executionData.steps.map(c=>({id:c.id,status:c.status}))},x=await h.post("/test-executions/",t);this.$emit("save",x.data),l.success("Test execution submitted successfully!"),this.$emit("close")}catch(t){console.error("Error submitting test execution:",t),l.error("Failed to submit test execution. Please try again.")}}}},S={class:"modal-overlay"},E={class:"modal-content"},k={class:"form-group"},w=["value"],T={class:"form-group"},C={class:"step-label"},V=["onUpdate:modelValue"],I=["value"],M={class:"modal-footer"};function U(o,t,x,c,a,b){return i(),n("div",S,[s("div",E,[t[7]||(t[7]=s("h3",{class:"modal-title text-center text-primary"},"Execute Test",-1)),s("form",{onSubmit:t[3]||(t[3]=D((...e)=>b.submit&&b.submit(...e),["prevent"]))},[s("div",k,[t[4]||(t[4]=s("label",{class:"form-label"},"Execution Status",-1)),d(s("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.executionData.status=e),class:"form-control",required:""},[(i(!0),n(m,null,p(a.statusChoices,e=>(i(),n("option",{key:e.value,value:e.value},u(e.label),9,w))),128))],512),[[f,a.executionData.status]])]),s("div",T,[t[5]||(t[5]=s("label",{class:"form-label"},"Execution Notes",-1)),d(s("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.executionData.notes=e),class:"form-control",rows:"3",placeholder:"Add execution notes...",required:""},null,512),[[g,a.executionData.notes]])]),(i(!0),n(m,null,p(a.executionData.steps,e=>(i(),n("div",{class:"form-group",key:e.id},[s("label",C,"Step "+u(e.step_number)+": "+u(e.description),1),d(s("select",{"onUpdate:modelValue":r=>e.status=r,class:"form-control",required:""},[(i(!0),n(m,null,p(a.statusChoices,r=>(i(),n("option",{key:r.value,value:r.value},u(r.label),9,I))),128))],8,V),[[f,e.status]])]))),128)),s("div",M,[s("button",{type:"button",class:"btn btn-danger",onClick:t[2]||(t[2]=e=>o.$emit("close"))},"Cancel"),t[6]||(t[6]=s("button",{type:"submit",class:"btn btn-success"},"Submit",-1))])],32)])])}const B=v(y,[["render",U],["__scopeId","data-v-6ce70405"]]);export{B as T};
