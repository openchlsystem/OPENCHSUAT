import{_ as M,c as i,o as l,b as t,f as C,g as y,v as S,l as h,F as g,d as k,t as b,r as z,j as f,i as F,e as w,h as V,a as $,k as v}from"./index-C8O2CauJ.js";const x={props:{organizations:Array},data(){return{form:{name:"",organization:"",description:""}}},methods:{submitForm(){this.$emit("createSystem",this.form),this.$emit("closeModal")}}},E={class:"modal-overlay"},N={class:"modal-content"},A={class:"mb-3"},D={class:"mb-3"},U=["value"],q={class:"mb-3"},O={class:"button-group"};function B(d,e,a,c,s,m){return l(),i("div",E,[t("div",N,[e[9]||(e[9]=t("h3",{class:"modal-title"},"Add New System",-1)),t("form",{onSubmit:e[4]||(e[4]=C((...n)=>m.submitForm&&m.submitForm(...n),["prevent"]))},[t("div",A,[e[5]||(e[5]=t("label",{class:"form-label"},"System Name",-1)),y(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>s.form.name=n),class:"form-control",placeholder:"Enter system name",required:""},null,512),[[S,s.form.name]])]),t("div",D,[e[6]||(e[6]=t("label",{class:"form-label"},"Organization",-1)),y(t("select",{"onUpdate:modelValue":e[1]||(e[1]=n=>s.form.organization=n),class:"form-control",required:""},[(l(!0),i(g,null,k(a.organizations,n=>(l(),i("option",{key:n.id,value:n.id},b(n.name),9,U))),128))],512),[[h,s.form.organization]])]),t("div",q,[e[7]||(e[7]=t("label",{class:"form-label"},"Description",-1)),y(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=n=>s.form.description=n),class:"form-control",rows:"3",placeholder:"Enter description"},null,512),[[S,s.form.description]])]),t("div",O,[t("button",{type:"button",class:"btn btn-secondary",onClick:e[3]||(e[3]=n=>d.$emit("closeModal"))},"Cancel"),e[8]||(e[8]=t("button",{type:"submit",class:"btn btn-primary"},"Create System",-1))])],32)])])}const _=M(x,[["render",B],["__scopeId","data-v-94d0930f"]]),j={components:{SystemModal:_},props:{systems:Array,organizations:Array},data(){return{showModal:!1,showForm:!1,form:{name:"",organization:"",description:""}}},methods:{openSystemForm(){this.showModal=!1,this.showForm=!0},async createSystem(){await this.$axios.post("/api/systems/",this.form),this.showForm=!1,this.$emit("refreshSystems")}}},I={key:0,class:"d-flex justify-content-between align-items-center mb-3"},T={key:2,class:"card p-4 mb-4 form-container"},L={class:"mb-3"},G={class:"mb-3"},H=["value"],J={class:"mb-3"},K={class:"d-flex justify-content-end"},P={key:3,class:"table table-striped"},Q=["onClick"],R=["onClick"],W=["onClick"];function X(d,e,a,c,s,m){const n=z("SystemModal");return l(),i("div",null,[s.showForm?f("",!0):(l(),i("div",I,[e[7]||(e[7]=t("h3",null,"Systems",-1)),t("button",{onClick:e[0]||(e[0]=o=>s.showModal=!0),class:"btn btn-primary"},"+ Add System")])),s.showModal?(l(),F(n,{key:1,onCloseModal:e[1]||(e[1]=o=>s.showModal=!1),onOpenSystemForm:m.openSystemForm},null,8,["onOpenSystemForm"])):f("",!0),s.showForm?(l(),i("div",T,[e[12]||(e[12]=t("h4",{class:"mb-3"},"Create New System",-1)),t("form",{onSubmit:e[6]||(e[6]=C((...o)=>m.createSystem&&m.createSystem(...o),["prevent"]))},[t("div",L,[e[8]||(e[8]=t("label",{class:"form-label"},"System Name",-1)),y(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.form.name=o),class:"form-control",required:""},null,512),[[S,s.form.name]])]),t("div",G,[e[9]||(e[9]=t("label",{class:"form-label"},"Organization",-1)),y(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.form.organization=o),class:"form-control",required:""},[(l(!0),i(g,null,k(a.organizations,o=>(l(),i("option",{key:o.id,value:o.id},b(o.name),9,H))),128))],512),[[h,s.form.organization]])]),t("div",J,[e[10]||(e[10]=t("label",{class:"form-label"},"Description",-1)),y(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.form.description=o),class:"form-control",required:""},null,512),[[S,s.form.description]])]),t("div",K,[e[11]||(e[11]=t("button",{type:"submit",class:"btn btn-success me-2"},"Create",-1)),t("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[5]||(e[5]=o=>s.showForm=!1)},"Cancel")])],32)])):f("",!0),s.showForm?f("",!0):(l(),i("table",P,[e[13]||(e[13]=t("thead",{class:"table-dark"},[t("tr",null,[t("th",null,"Name"),t("th",null,"Organization"),t("th",null,"Description"),t("th",null,"Actions")])],-1)),t("tbody",null,[(l(!0),i(g,null,k(a.systems,o=>(l(),i("tr",{key:o.id},[t("td",null,b(o.name),1),t("td",null,b(o.organization.name),1),t("td",null,b(o.description),1),t("td",null,[t("button",{onClick:p=>d.$emit("view",o),class:"btn btn-info btn-sm"},"View",8,Q),t("button",{onClick:p=>d.$emit("edit",o),class:"btn btn-warning btn-sm"},"Edit",8,R),t("button",{onClick:p=>d.$emit("delete",o.id),class:"btn btn-danger btn-sm"},"Delete",8,W)])]))),128))])]))])}const Y=M(j,[["render",X],["__scopeId","data-v-b17034ae"]]),Z={class:"container"},ee={__name:"SystemManagementView",setup(d){const e=w([]),a=w(!1),c=w(null),s=async()=>{try{const r=await v.get("/api/systems/");e.value=r.data}catch(r){console.error("Error fetching systems:",r)}},m=r=>{c.value=r,a.value=!0},n=()=>{a.value=!1,c.value=null},o=async r=>{try{r.id?await v.put(`/api/systems/${r.id}/`,r):await v.post("/api/systems/",r),s(),n()}catch(u){console.error("Error saving system:",u)}},p=async r=>{if(confirm("Are you sure you want to delete this system?"))try{await v.delete(`/api/systems/${r}/`),s()}catch(u){console.error("Error deleting system:",u)}};return V(s),(r,u)=>(l(),i("div",Z,[u[0]||(u[0]=t("h2",null,"System Management",-1)),$(Y,{systems:e.value,onEdit:m,onDelete:p},null,8,["systems"]),a.value?(l(),F(_,{key:0,system:c.value,onClose:n,onSave:o},null,8,["system"])):f("",!0)]))}},se=M(ee,[["__scopeId","data-v-cf33b160"]]);export{se as default};
