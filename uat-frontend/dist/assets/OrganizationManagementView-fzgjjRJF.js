import{_ as g,c as u,o as c,a as t,F as y,g as z,t as d,h as m,i as C,j as O,k as f,v as h,l as k,b as w,m as $,n as M,p as _}from"./index-DwHvbeIw.js";const D={class:"table-responsive"},x={class:"table table-striped"},E=["onClick"],S=["onClick"],I={__name:"OrganizationTable",props:{organizations:{type:Array,required:!0}},emits:["edit","delete"],setup(p){const r=o=>new Date(o).toLocaleDateString();return(o,s)=>(c(),u("div",D,[t("table",x,[s[0]||(s[0]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Name"),t("th",null,"Description"),t("th",null,"Created At"),t("th",null,"Actions")])],-1)),t("tbody",null,[(c(!0),u(y,null,z(p.organizations,n=>(c(),u("tr",{key:n.id},[t("td",null,d(n.id),1),t("td",null,d(n.name),1),t("td",null,d(n.description),1),t("td",null,d(r(n.created_at)),1),t("td",null,[t("button",{class:"btn btn-sm btn-primary me-2",onClick:i=>o.$emit("edit",n)}," Edit ",8,E),t("button",{class:"btn btn-sm btn-danger",onClick:i=>o.$emit("delete",n.id)}," Delete ",8,S)])]))),128))])])]))}},N=g(I,[["__scopeId","data-v-cbe001cd"]]),V={class:"modal fade show",tabindex:"-1","aria-hidden":"true",style:{display:"block"}},A={class:"modal-dialog"},B={class:"modal-content"},q={class:"modal-header"},T={class:"modal-title"},U={class:"modal-body"},j={class:"mb-3"},F={class:"mb-3"},L={class:"modal-footer"},P={type:"submit",class:"btn btn-primary"},G={__name:"OrganizationModal",props:{organization:{type:Object,default:()=>({})}},emits:["save","close"],setup(p,{emit:r}){const o=p,s=r,n=m({name:"",description:""}),i=m(!1);C(()=>o.organization,l=>{l&&l.id?(n.value={...l},i.value=!0):(n.value={name:"",description:""},i.value=!1)},{immediate:!0});const b=()=>{var l;s("save",{...n.value,id:(l=o.organization)==null?void 0:l.id})},v=()=>{s("close")};return(l,e)=>(c(),u("div",V,[t("div",A,[t("div",B,[t("form",{onSubmit:O(b,["prevent"])},[t("div",q,[t("h5",T,d(i.value?"Edit Organization":"Create Organization"),1),t("button",{type:"button",class:"btn-close",onClick:v,"aria-label":"Close"})]),t("div",U,[t("div",j,[e[2]||(e[2]=t("label",{class:"form-label"},"Name",-1)),f(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>n.value.name=a),type:"text",class:"form-control",required:""},null,512),[[h,n.value.name]])]),t("div",F,[e[3]||(e[3]=t("label",{class:"form-label"},"Description",-1)),f(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=a=>n.value.description=a),class:"form-control",rows:"3",required:""},null,512),[[h,n.value.description]])])]),t("div",L,[t("button",{type:"button",class:"btn btn-secondary",onClick:v}," Cancel "),t("button",P,d(i.value?"Update":"Create"),1)])],32)])])]))}},H=g(G,[["__scopeId","data-v-215758f3"]]),J={class:"container"},K={__name:"OrganizationManagementView",setup(p){const r=m([]),o=m(!1),s=m(null),n=async()=>{try{const e=await _.get("/organizations/");r.value=e.data}catch(e){console.error("Error fetching organizations:",e),e.response&&e.response.status===401&&(alert("Session expired. Please log in again."),window.location.href="/login")}},i=e=>{s.value=e,o.value=!0},b=()=>{o.value=!1,s.value=null},v=async e=>{try{e.id?await _.put(`/organizations/${e.id}/`,e):await _.post("/organizations/",e),n(),b()}catch(a){console.error("Error saving organization:",a)}},l=async e=>{if(confirm("Are you sure you want to delete this organization?"))try{await _.delete(`/organizations/${e}/`),n()}catch(a){console.error("Error deleting organization:",a)}};return k(n),(e,a)=>(c(),u("div",J,[a[1]||(a[1]=t("h2",null,"Organization Management",-1)),t("button",{onClick:a[0]||(a[0]=Q=>i(null)),class:"btn btn-primary mb-3"}," + Create Organization "),w(N,{organizations:r.value,onEdit:i,onDelete:l},null,8,["organizations"]),o.value?(c(),$(H,{key:0,organization:s.value,onClose:b,onSave:v},null,8,["organization"])):M("",!0)]))}},W=g(K,[["__scopeId","data-v-63fae200"]]);export{W as default};
