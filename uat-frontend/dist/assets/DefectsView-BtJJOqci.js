import{_ as y,c as u,o as i,a as t,n as b,F as V,g as N,t as a,s as v,k as f,v as D,q as C,y as F,d as p,r as m,b as S,m as k,p as A}from"./index-MM3znn9C.js";const w={props:{defects:{type:Array,required:!0}},data(){return{sortKey:"",sortAsc:!0}},computed:{sortedDefects(){return[...this.defects].sort((n,e)=>{if(!this.sortKey)return 0;const o=this.getNestedValue(n,this.sortKey)||"",d=this.getNestedValue(e,this.sortKey)||"";let r=o>d?1:-1;return this.sortAsc?r:-r})}},methods:{sortBy(n){this.sortAsc=this.sortKey===n?!this.sortAsc:!0,this.sortKey=n},getNestedValue(n,e){return e.split(".").reduce((o,d)=>o==null?void 0:o[d],n)}},mounted(){console.log("Defects data:",this.defects)}},B={class:"defect-table"},x=["onClick"],h={key:0};function M(n,e,o,d,r,l){return i(),u("div",null,[t("table",B,[t("thead",null,[t("tr",null,[t("th",{onClick:e[0]||(e[0]=s=>l.sortBy("title"))},"Defect Name"),t("th",{onClick:e[1]||(e[1]=s=>l.sortBy("execution.test_case_title"))},"Test Case"),t("th",{onClick:e[2]||(e[2]=s=>l.sortBy("severity"))},"Severity"),t("th",{onClick:e[3]||(e[3]=s=>l.sortBy("status"))},"Status"),t("th",{onClick:e[4]||(e[4]=s=>l.sortBy("created_at"))},"Date Reported"),e[5]||(e[5]=t("th",null,"Actions",-1))])]),t("tbody",null,[(i(!0),u(V,null,N(l.sortedDefects,s=>{var c;return i(),u("tr",{key:s.id},[t("td",null,a(s.title??"N/A"),1),t("td",null,a(((c=s.execution)==null?void 0:c.test_case_title)??"N/A"),1),t("td",null,[t("span",{class:v(`severity-${s.severity}`)},a(s.severity??"N/A"),3)]),t("td",null,[t("span",{class:v(`status-${s.status}`)},a(s.status??"N/A"),3)]),t("td",null,a(s.created_at?new Date(s.created_at).toLocaleDateString():"N/A"),1),t("td",null,[t("button",{class:"btn-view",onClick:g=>n.$emit("view-details",s)},"View",8,x)])])}),128)),l.sortedDefects.length?b("",!0):(i(),u("tr",h,e[6]||(e[6]=[t("td",{colspan:"6",class:"no-data"},"No defects reported.",-1)])))])])])}const I=y(w,[["render",M],["__scopeId","data-v-748a0666"]]),T={data(){return{searchQuery:"",selectedSeverity:"",selectedStatus:"",startDate:"",endDate:""}},methods:{applyFilters(){this.$emit("filter-updated",{searchQuery:this.searchQuery,selectedSeverity:this.selectedSeverity,selectedStatus:this.selectedStatus,startDate:this.startDate,endDate:this.endDate})},resetFilters(){this.searchQuery="",this.selectedSeverity="",this.selectedStatus="",this.startDate="",this.endDate="",this.applyFilters()}}},U={class:"filter-container"};function K(n,e,o,d,r,l){return i(),u("div",U,[f(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>r.searchQuery=s),type:"text",placeholder:"Search by defect name...",onInput:e[1]||(e[1]=(...s)=>l.applyFilters&&l.applyFilters(...s))},null,544),[[D,r.searchQuery]]),f(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>r.selectedSeverity=s),onChange:e[3]||(e[3]=(...s)=>l.applyFilters&&l.applyFilters(...s))},e[11]||(e[11]=[F('<option value="" data-v-f327368a>All Severities</option><option value="Critical" data-v-f327368a>Critical</option><option value="High" data-v-f327368a>High</option><option value="Medium" data-v-f327368a>Medium</option><option value="Low" data-v-f327368a>Low</option>',5)]),544),[[C,r.selectedSeverity]]),f(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>r.selectedStatus=s),onChange:e[5]||(e[5]=(...s)=>l.applyFilters&&l.applyFilters(...s))},e[12]||(e[12]=[F('<option value="" data-v-f327368a>All Status</option><option value="Open" data-v-f327368a>Open</option><option value="InProgress" data-v-f327368a>In Progress</option><option value="Resolved" data-v-f327368a>Resolved</option><option value="Closed" data-v-f327368a>Closed</option>',5)]),544),[[C,r.selectedStatus]]),f(t("input",{type:"date","onUpdate:modelValue":e[6]||(e[6]=s=>r.startDate=s),onChange:e[7]||(e[7]=(...s)=>l.applyFilters&&l.applyFilters(...s))},null,544),[[D,r.startDate]]),f(t("input",{type:"date","onUpdate:modelValue":e[8]||(e[8]=s=>r.endDate=s),onChange:e[9]||(e[9]=(...s)=>l.applyFilters&&l.applyFilters(...s))},null,544),[[D,r.endDate]]),t("button",{class:"btn-reset",onClick:e[10]||(e[10]=(...s)=>l.resetFilters&&l.resetFilters(...s))},"Reset")])}const Q=y(T,[["render",K],["__scopeId","data-v-f327368a"]]),R={props:{defect:Object}},L={class:"modal-overlay"},O={class:"modal-content"};function q(n,e,o,d,r,l){return i(),u("div",L,[t("div",O,[e[9]||(e[9]=t("h3",null,"Defect Details",-1)),t("p",null,[e[1]||(e[1]=t("strong",null,"Name:",-1)),p(" "+a(o.defect.name),1)]),t("p",null,[e[2]||(e[2]=t("strong",null,"Description:",-1)),p(" "+a(o.defect.description),1)]),t("p",null,[e[3]||(e[3]=t("strong",null,"Test Case:",-1)),p(" "+a(o.defect.test_case),1)]),t("p",null,[e[4]||(e[4]=t("strong",null,"Severity:",-1)),e[5]||(e[5]=p()),t("span",{class:v(`severity-${o.defect.severity}`)},a(o.defect.severity),3)]),t("p",null,[e[6]||(e[6]=t("strong",null,"Status:",-1)),e[7]||(e[7]=p()),t("span",{class:v(`status-${o.defect.status}`)},a(o.defect.status),3)]),t("p",null,[e[8]||(e[8]=t("strong",null,"Date Reported:",-1)),p(" "+a(new Date(o.defect.reported_at).toLocaleString()),1)]),t("button",{onClick:e[0]||(e[0]=s=>n.$emit("close")),class:"btn-close"},"Close")])])}const E=y(R,[["render",q],["__scopeId","data-v-a8eeaa7a"]]),H={components:{DefectTable:I,DefectFilter:Q,DefectDetailModal:E},data(){return{defects:[],filteredDefects:[],selectedDefect:null}},methods:{fetchDefects(){A.get("/defects").then(n=>{this.defects=n.data,this.filteredDefects=n.data}).catch(n=>console.error("Error fetching defects:",n))},applyFilters(n){this.filteredDefects=n},openDefectModal(n){this.selectedDefect=n}},created(){this.fetchDefects()}},P={class:"container"};function j(n,e,o,d,r,l){const s=m("DefectFilter"),c=m("DefectTable"),g=m("DefectDetailModal");return i(),u("div",P,[e[1]||(e[1]=t("h2",{class:"page-title"},"Reported Defects",-1)),S(s,{onFilterUpdated:l.applyFilters},null,8,["onFilterUpdated"]),S(c,{defects:r.filteredDefects,onViewDetails:l.openDefectModal},null,8,["defects","onViewDetails"]),r.selectedDefect?(i(),k(g,{key:0,defect:r.selectedDefect,onClose:e[0]||(e[0]=z=>r.selectedDefect=null)},null,8,["defect"])):b("",!0)])}const J=y(H,[["render",j],["__scopeId","data-v-402bcf8b"]]);export{J as default};
