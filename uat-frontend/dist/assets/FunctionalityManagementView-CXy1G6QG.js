import{_ as p,c,o as r,a as t,F as C,g as F,t as u,h as M,i as _,j as $,k as f,v as h,p as k,r as g,b as w,m as T,n as S,f as m}from"./index-DrsjAiDN.js";const x={props:{functionalities:Array,systems:Array},methods:{getSystemName(e){if(!e||!this.systems)return"N/A";const s=this.systems.find(d=>d.id===e);return s?s.name:"N/A"}}},E={class:"d-flex justify-content-between align-items-center mb-3"},N={class:"table table-striped"},V={class:"d-flex gap-2"},A=["onClick"],D=["onClick"],U=["onClick"];function j(e,s,d,y,o,l){return r(),c("div",null,[s[2]||(s[2]=t("div",{style:{"margin-bottom":"20px"}},null,-1)),t("div",E,[t("button",{onClick:s[0]||(s[0]=i=>e.$emit("openModal")),class:"btn btn-primary"},"+ Add Functionality")]),s[3]||(s[3]=t("div",{style:{"margin-bottom":"20px"}},null,-1)),t("table",N,[s[1]||(s[1]=t("thead",{class:"table-dark"},[t("tr",null,[t("th",null,"Name"),t("th",null,"System"),t("th",null,"Description"),t("th",null,"Actions")])],-1)),t("tbody",null,[(r(!0),c(C,null,F(d.functionalities,i=>(r(),c("tr",{key:i.id},[t("td",null,u(i.name),1),t("td",null,u(l.getSystemName(i.system)),1),t("td",null,u(i.description),1),t("td",null,[t("div",V,[t("button",{onClick:n=>e.$emit("edit",i),class:"btn btn-warning btn-sm"},"Edit",8,A),t("button",{onClick:n=>e.$emit("delete",i.id),class:"btn btn-danger btn-sm"},"Delete",8,D),t("button",{onClick:n=>e.$emit("viewTestCases",i),class:"btn btn-primary btn-sm"},"Test Cases",8,U)])])]))),128))])])])}const q=p(x,[["render",j]]),B={class:"modal-overlay"},O={class:"modal-content"},I={class:"mb-3"},L={class:"mb-3"},z={class:"mb-3"},G=["value"],H={class:"d-flex justify-content-between"},J={type:"submit",class:"btn btn-primary"},K={__name:"FunctionalityModal",props:{functionality:Object,systems:Array},emits:["close","save"],setup(e,{emit:s}){const d=e,y=s,o=M({name:"",description:"",system:null});_(()=>d.functionality,i=>{var n;i?o.value={id:i.id||null,name:i.name||"",description:i.description||"",system:((n=i.system)==null?void 0:n.id)||null}:o.value={name:"",description:"",system:null}},{immediate:!0});const l=()=>{y("save",{...o.value})};return(i,n)=>{var b,v;return r(),c("div",B,[t("div",O,[t("h3",null,u((b=e.functionality)!=null&&b.id?"Edit Functionality":"Create Functionality"),1),t("form",{onSubmit:$(l,["prevent"])},[t("div",I,[n[4]||(n[4]=t("label",{class:"form-label"},"Functionality Name",-1)),f(t("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=a=>o.value.name=a),class:"form-control",required:""},null,512),[[h,o.value.name]])]),t("div",L,[n[5]||(n[5]=t("label",{class:"form-label"},"Description",-1)),f(t("textarea",{"onUpdate:modelValue":n[1]||(n[1]=a=>o.value.description=a),class:"form-control",rows:"3",required:""},null,512),[[h,o.value.description]])]),t("div",z,[n[6]||(n[6]=t("label",{class:"form-label"},"System",-1)),f(t("select",{"onUpdate:modelValue":n[2]||(n[2]=a=>o.value.system=a),class:"form-control",required:""},[(r(!0),c(C,null,F(e.systems,a=>(r(),c("option",{key:a.id,value:a.id},u(a.name),9,G))),128))],512),[[k,o.value.system]])]),t("div",H,[t("button",{type:"button",class:"btn btn-secondary",onClick:n[3]||(n[3]=a=>i.$emit("close"))},"Cancel"),t("button",J,u((v=e.functionality)!=null&&v.id?"Update":"Create"),1)])],32)])])}}},P=p(K,[["__scopeId","data-v-f592266f"]]),Q={components:{FunctionalityTable:q,FunctionalityModal:P},data(){return{functionalities:[],systems:[],showModal:!1,selectedFunctionality:null}},methods:{async fetchFunctionalities(){try{const e=await m.get("/functionalities/");this.functionalities=e.data}catch(e){console.error("Error fetching functionalities:",e)}},async fetchSystems(){try{const e=await m.get("/systems/");this.systems=e.data}catch(e){console.error("Error fetching systems:",e)}},openCreateModal(){console.log("✅ Opening Create Modal"),this.selectedFunctionality={id:null,name:"",description:"",system:null},this.showModal=!0,this.$nextTick(()=>this.$forceUpdate())},editFunctionality(e){console.log("✅ Editing Functionality",e),this.selectedFunctionality={...e},this.showModal=!0},async deleteFunctionality(e){if(confirm("Are you sure you want to delete this functionality?"))try{await m.delete(`/functionalities/${e}/`),this.functionalities=this.functionalities.filter(s=>s.id!==e)}catch(s){console.error("Error deleting functionality:",s)}},async saveFunctionality(e){try{e.id?await m.put(`/functionalities/${e.id}/`,e):await m.post("/functionalities/",e),this.fetchFunctionalities(),this.closeModal()}catch(s){console.error("Error saving functionality:",s)}},closeModal(){console.log("✅ Closing Modal"),this.selectedFunctionality=null,this.showModal=!1},navigateToTestCases(e){this.$router.push({name:"FunctionalityTestCases",params:{functionalityId:e.id},query:{functionalityName:e.name}})}},mounted(){this.fetchFunctionalities(),this.fetchSystems()}},R={class:"container mt-4"};function W(e,s,d,y,o,l){const i=g("FunctionalityTable"),n=g("FunctionalityModal");return r(),c("div",R,[s[0]||(s[0]=t("h2",{class:"mb-4"},"Functionality Management",-1)),w(i,{functionalities:o.functionalities,systems:o.systems,onOpenModal:l.openCreateModal,onEdit:l.editFunctionality,onDelete:l.deleteFunctionality,onViewTestCases:l.navigateToTestCases},null,8,["functionalities","systems","onOpenModal","onEdit","onDelete","onViewTestCases"]),o.showModal?(r(),T(n,{key:0,functionality:o.selectedFunctionality,systems:o.systems,onClose:l.closeModal,onSave:l.saveFunctionality},null,8,["functionality","systems","onClose","onSave"])):S("",!0)])}const Y=p(Q,[["render",W]]);export{Y as default};
