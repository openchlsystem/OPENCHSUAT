import{_ as p,c as d,o as i,b as e,t as a,f as _,g as c,v as U,l as v,F as f,d as b,r as M,i as g,j as k,n as C,m}from"./index-BDR-ZV5H.js";const x={props:{user:Object,roles:Array},data(){return{localUser:{...this.user}}},methods:{save(){this.$emit("save",this.localUser)}}},A={class:"modal-overlay"},E={class:"modal-content"},S={class:"form-group"},w={class:"form-group"},V={class:"form-group"},I={class:"form-group"},O={class:"form-buttons"};function q(t,s,u,y,o,n){return i(),d("div",A,[e("div",E,[e("h3",null,a(u.user.id?"Edit User":"Add New User"),1),e("form",{onSubmit:s[5]||(s[5]=_((...l)=>n.save&&n.save(...l),["prevent"]))},[e("div",S,[s[6]||(s[6]=e("label",null,"Username",-1)),c(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=l=>o.localUser.username=l),class:"form-control",required:""},null,512),[[U,o.localUser.username]])]),e("div",w,[s[7]||(s[7]=e("label",null,"Email",-1)),c(e("input",{type:"email","onUpdate:modelValue":s[1]||(s[1]=l=>o.localUser.email=l),class:"form-control",required:""},null,512),[[U,o.localUser.email]])]),e("div",V,[s[8]||(s[8]=e("label",null,"Role",-1)),c(e("select",{"onUpdate:modelValue":s[2]||(s[2]=l=>o.localUser.role=l),class:"form-control"},[(i(!0),d(f,null,b(u.roles,l=>(i(),d("option",{key:l},a(l),1))),128))],512),[[v,o.localUser.role]])]),e("div",I,[s[10]||(s[10]=e("label",null,"Status",-1)),c(e("select",{"onUpdate:modelValue":s[3]||(s[3]=l=>o.localUser.is_active=l),class:"form-control"},s[9]||(s[9]=[e("option",{value:!0},"Active",-1),e("option",{value:!1},"Inactive",-1)]),512),[[v,o.localUser.is_active]])]),e("div",O,[s[11]||(s[11]=e("button",{type:"submit",class:"btn btn-primary"},"Save",-1)),e("button",{type:"button",onClick:s[4]||(s[4]=l=>t.$emit("close")),class:"btn btn-secondary"},"Cancel")])],32)])])}const B=p(x,[["render",q],["__scopeId","data-v-f5846403"]]),j={components:{UserModal:B},data(){return{users:[],roles:["Admin","Tester"],isUserModalOpen:!1,selectedUser:null}},methods:{fetchUsers(){m.get("/users/").then(t=>{this.users=t.data}).catch(t=>console.error("Error fetching users:",t))},openUserModal(t){this.selectedUser=t?{...t}:{username:"",email:"",role:"Tester",is_active:!0},this.isUserModalOpen=!0},closeUserModal(){this.isUserModalOpen=!1},saveUser(t){(t.id?m.put(`/users/${t.id}/`,t):m.post("/users/",t)).then(()=>{this.fetchUsers(),alert(t.id?"User updated successfully!":"User created successfully!")}).catch(u=>console.error("Error saving user:",u)),this.closeUserModal()},deleteUser(t){confirm("Are you sure you want to delete this user?")&&m.delete(`/users/${t}/`).then(()=>{this.fetchUsers(),alert("User deleted successfully!")}).catch(s=>console.error("Error deleting user:",s))}},mounted(){this.fetchUsers()}},N={class:"container"},T={class:"d-flex justify-content-between align-items-center mb-3"},F={class:"table table-striped"},R=["onClick"],$=["onClick"];function z(t,s,u,y,o,n){const l=M("UserModal");return i(),d("div",N,[e("div",T,[s[1]||(s[1]=e("h3",null,"User Management",-1)),e("button",{onClick:s[0]||(s[0]=r=>n.openUserModal(null)),class:"btn btn-primary"},"+ Add User")]),e("table",F,[s[2]||(s[2]=e("thead",{class:"table-dark"},[e("tr",null,[e("th",null,"Username"),e("th",null,"Email"),e("th",null,"Role"),e("th",null,"Status"),e("th",null,"Actions")])],-1)),e("tbody",null,[(i(!0),d(f,null,b(o.users,r=>(i(),d("tr",{key:r.id},[e("td",null,a(r.username),1),e("td",null,a(r.email),1),e("td",null,a(r.role),1),e("td",null,[e("span",{class:C(r.is_active?"text-success":"text-danger")},a(r.is_active?"Active":"Inactive"),3)]),e("td",null,[e("button",{onClick:h=>n.openUserModal(r),class:"btn btn-warning btn-sm"},"Edit",8,R),e("button",{onClick:h=>n.deleteUser(r.id),class:"btn btn-danger btn-sm"},"Delete",8,$)])]))),128))])]),o.isUserModalOpen?(i(),g(l,{key:0,user:o.selectedUser,roles:o.roles,onSave:n.saveUser,onClose:n.closeUserModal},null,8,["user","roles","onSave","onClose"])):k("",!0)])}const G=p(j,[["render",z],["__scopeId","data-v-81507868"]]);export{G as default};
